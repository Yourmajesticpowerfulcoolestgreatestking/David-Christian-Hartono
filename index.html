<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubus Berputar dengan Tekstur</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>

<script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
        }
    }
</script>

<script type="module">
    import * as THREE from 'three';

    // --- Konfigurasi ---
    // Ganti dengan URL gambar Anda yang sebenarnya!
    // Pastikan gambar bisa diakses lintas domain (CORS enabled) jika dari domain lain.
    // Contoh menggunakan tekstur dari Three.js:
    const textureUrl = 'https://threejs.org/examples/textures/crate.gif';
    // const textureUrl = 'URL_GAMBAR_ANDA_DISINI.jpg'; // <-- GANTI INI

    const rotationSpeedX = 0.005;
    const rotationSpeedY = 0.005;
    // --- Akhir Konfigurasi ---

    let scene, camera, renderer, cube;

    function init() {
        // 1. Scene (Wadah)
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0xeeeeee); // Warna latar belakang

        // 2. Camera (Sudut Pandang)
        const fov = 75; // Field of View
        const aspect = window.innerWidth / window.innerHeight; // Rasio aspek
        const near = 0.1; // Jarak render terdekat
        const far = 1000; // Jarak render terjauh
        camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
        camera.position.z = 3; // Mundurkan kamera sedikit

        // 3. Renderer (Pelukis ke Layar)
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement); // Tambahkan canvas ke HTML

        // 4. Geometry (Bentuk: Kubus)
        const geometry = new THREE.BoxGeometry(1, 1, 1); // Ukuran 1x1x1

        // 5. Texture Loader (Mengambil Gambar dari URL)
        const textureLoader = new THREE.TextureLoader();
        textureLoader.load(
            textureUrl,
            // Fungsi yang dijalankan saat tekstur berhasil dimuat
            (texture) => {
                console.log("Tekstur berhasil dimuat:", textureUrl);

                // Set filter & wrap mode (opsional, tapi bagus untuk kualitas)
                texture.colorSpace = THREE.SRGBColorSpace; // Koreksi warna
                texture.minFilter = THREE.LinearFilter; // Filter saat mengecil
                texture.magFilter = THREE.LinearFilter; // Filter saat membesar

                // 6. Material (Bahan: Menggunakan Tekstur)
                // MeshBasicMaterial tidak terpengaruh cahaya
                const material = new THREE.MeshBasicMaterial({ map: texture });

                // 7. Mesh (Objek 3D: Gabungan Bentuk & Bahan)
                cube = new THREE.Mesh(geometry, material);

                // 8. Tambahkan Kubus ke Scene
                scene.add(cube);

                // Mulai animasi HANYA setelah tekstur dimuat
                animate();
            },
            // Fungsi yang dijalankan selama proses loading (opsional)
            (xhr) => {
                console.log((xhr.loaded / xhr.total * 100) + '% loaded');
            },
            // Fungsi yang dijalankan jika terjadi error saat memuat tekstur
            (error) => {
                console.error('Error memuat tekstur:', textureUrl, error);
                // Mungkin tampilkan pesan error atau fallback ke warna solid
                const fallbackMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 }); // Merah sbg tanda error
                cube = new THREE.Mesh(geometry, fallbackMaterial);
                scene.add(cube);
                animate(); // Tetap mulai animasi walau tekstur gagal
            }
        );

        // Menangani perubahan ukuran window
        window.addEventListener('resize', onWindowResize, false);
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix(); // Update matriks proyeksi kamera
        renderer.setSize(window.innerWidth, window.innerHeight); // Sesuaikan ukuran renderer
    }

    function animate() {
        // Minta browser untuk menjalankan fungsi ini di frame berikutnya
        requestAnimationFrame(animate);

        // Pastikan 'cube' sudah dibuat sebelum mencoba memutarnya
        if (cube) {
            // Putar kubus sedikit setiap frame
            cube.rotation.x += rotationSpeedX;
            cube.rotation.y += rotationSpeedY;
        }

        // Render scene dari sudut pandang kamera
        renderer.render(scene, camera);
    }

    // Panggil fungsi init untuk memulai semuanya
    init();

</script>

</body>
</html>